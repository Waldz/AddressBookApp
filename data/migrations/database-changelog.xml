<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="contact-structure" author="waldz">
        <sql><![CDATA[
            CREATE TABLE `contact` (
                `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
                `title` varchar(255) NOT NULL,
                `name` varchar(255) NOT NULL,
                `email` varchar(255) NOT NULL,
                `supervisor_contact_id` int(10) unsigned DEFAULT NULL,
                `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
                `updated_at` datetime DEFAULT NULL,
                PRIMARY KEY (`id`),
                KEY `supervisor_contact_id` (`supervisor_contact_id`),
                CONSTRAINT `fk_contact__supervisor_contact_id` FOREIGN KEY (`supervisor_contact_id`) REFERENCES `contact`(`id`) ON DELETE SET NULL
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci COMMENT='Address book records';
        ]]></sql>
        <sql><![CDATA[
            INSERT INTO `contact`
                (`id`, `title`, `name`, `email`, `supervisor_contact_id`)
            VALUES
                (1, 'Project Leader', 'Hans Jørgen Doe', 'hans.jorgen.doe@bigbank.ee', NULL),
                (2, 'Analyst', 'Mikael Blomkvist', 'mikael.blomkvist@bigbank.ee', 1),
                (3, 'Project Leader', 'Natālija Izāks Kūks', 'natalija.izaks.kuks@bigbank.ee', NULL),
                (4, 'Business Analyst', 'Lee Burrows', 'lee.burrows@bigbank.ee', 3),
                (5, 'Tester', 'Tobias Fünke', 'tobias.fünke@bigbank.ee', 4),
                (6, 'Team Coordinator', 'Roland Charts', 'roland.charts@bigbank.ee', 3),
                (7, 'Developer', 'Igor Mänd', 'igor.mand@bigbank.ee', 6),
                (8, 'Tester', 'Mike Click', 'mike.click@bigbank.ee', 6);
        ]]></sql>
    </changeSet>

</databaseChangeLog>
